<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>mELO Ratings — mELO • mELO</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="mELO Ratings — mELO" />
<meta property="og:description" content="This function implements the multidimensional ELO (mELO) rating system for
performing pairwise comparisons. The mELO rating system has the desirable
properties of being able to handle cyclic interactions and is better behaved
in the presence of redundant copies of players/agents or tasks." />
<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mELO</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/01_introduction.html">Introduction to mELO ratings</a>
    </li>
    <li>
      <a href="../articles/02_afl.html">Application of mELO ratings to AFL matches</a>
    </li>
    <li>
      <a href="../articles/03_noise.html">Impact of noisy or probabilistic outcomes in mELO models</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dclaz/mELO">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>mELO Ratings</h1>
    <small class="dont-index">Source: <a href='https://github.com/dclaz/mELO/blob/master/R/mELO.R'><code>R/mELO.R</code></a></small>
    <div class="hidden name"><code>mELO.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function implements the multidimensional ELO (mELO) rating system for
performing pairwise comparisons. The mELO rating system has the desirable
properties of being able to handle cyclic interactions and is better behaved
in the presence of redundant copies of players/agents or tasks.</p>
    </div>

    <pre class="usage"><span class='fu'>mELO</span>(
  <span class='no'>match_data</span>,
  <span class='kw'>init_data</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>init_c_mat</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>init_rating</span> <span class='kw'>=</span> <span class='fl'>2200</span>,
  <span class='kw'>k</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span>(!<span class='fu'><a href='https://rdrr.io/r/base/NULL.html'>is.null</a></span>(<span class='no'>init_c_mat</span>), <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>ncol</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span>(<span class='no'>init_c_mat</span>)), <span class='fl'>1</span>),
  <span class='kw'>eta_1</span> <span class='kw'>=</span> <span class='fl'>27</span>,
  <span class='kw'>eta_2</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>p1_advantage</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>save_history</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>sort</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>match_data</th>
      <td><p>A data frame containing four columns: (1) a numeric
vector denoting the time period in which the game took place (2) a numeric
or character identifier for player one (3) a numeric or character identifier
for player two and (4) the result of the game expressed as a number,
typically equal to one for a player one win, zero for a player two win and
one half for a draw.</p></td>
    </tr>
    <tr>
      <th>init_data</th>
      <td><p>Initialise a rating model with <code>ratings</code> component of the
returned list of the output from a previous <code>mELO()</code> call, or a data.frame with
columns Player and Rating.</p></td>
    </tr>
    <tr>
      <th>init_c_mat</th>
      <td><p>Initialise a rating model with <code>c_mat</code> component of the
returned list of the output from a previous <code>mELO()</code> call, or a matrix with
with dimensions (#agents, k). Recall the C matrix encodes the non-transitive
interactions of the agents. This is initialised randomly if not provided.</p></td>
    </tr>
    <tr>
      <th>init_rating</th>
      <td><p>The initial rating for players not appearing in
<code>init_data</code>.</p></td>
    </tr>
    <tr>
      <th>k</th>
      <td><p>Integer defining the complexity of non-transitive interactions to model.</p></td>
    </tr>
    <tr>
      <th>eta_1</th>
      <td><p>Learning rate for the ratings vector.</p></td>
    </tr>
    <tr>
      <th>eta_2</th>
      <td><p>Learning rate for elements of the C matrix.</p></td>
    </tr>
    <tr>
      <th>p1_advantage</th>
      <td><p>Player 1 advtange parameter. Either a single value or a
vector equal to the number of rows in <code>match_data</code>.</p></td>
    </tr>
    <tr>
      <th>save_history</th>
      <td><p>If <code>TRUE</code> return the rating history for each player.</p></td>
    </tr>
    <tr>
      <th>sort</th>
      <td><p>If <code>TRUE</code>, sort the output ratings from highest to lowest.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list object of class "<code>mELO_rating</code>" with the following
components:</p><dl class='dl-horizontal'>
  <dt>ratings</dt><dd><p>A data frame of the results at the end of the final time period.
  The variables are self explanatory except for Lag, which represents the
  number of time periods since the player last played a game. This is equal
  to zero for players who played in the latest time period, and is also zero
  for players who have not yet played any games.</p></dd>
  <dt>history</dt><dd><p>An array containing the ratings history for all
  players.</p></dd>
  <dt>c_mat</dt><dd><p>An estimate of the C matrix.</p></dd>
  <dt>c_mat_history</dt><dd><p>An array containing the history of the C matrix.</p></dd>
  <dt>p1_advantage</dt><dd><p>A single value or a vector values for the
  advantage Player 1 had.</p></dd>
  <dt>k</dt><dd><p>Integer defining the complexity of non-transitive interactions to model.</p></dd>
  <dt>eta_1</dt><dd><p>Learning rate for the ratings vector.</p></dd>
  <dt>eta_2</dt><dd><p>Learning rate for elements of the C matrix.</p></dd>
  <dt>type</dt><dd><p>The type of model. In this case, "mELO".</p></dd>
  <dt>preds</dt><dd><p>The player 1 success probabilities predicted prior to adjusting to the
  outcome of the match.</p></dd>
  <dt>outcomes</dt><dd><p>The outcome for player 1 for each match.</p></dd>
  <dt>preds_logloss</dt><dd><p>The mean logloss error for all predictions.</p></dd>


</dl>

    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Balduzzi, David, et al. "Re-evaluating Evaluation." arXiv preprint arXiv:1806.02643 (2018).</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Rock paper scissors</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='no'>rps_df</span>)</div><div class='output co'>#&gt; <span style='color: #555555;'># A tibble: 6 x 4</span><span>
#&gt;   time_index throw_1  throw_2  outcome
#&gt;        </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>      </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #555555;'>1</span><span>          1 PAPER    ROCK           1
#&gt; </span><span style='color: #555555;'>2</span><span>          2 ROCK     SCISSORS       1
#&gt; </span><span style='color: #555555;'>3</span><span>          3 SCISSORS PAPER          1
#&gt; </span><span style='color: #555555;'>4</span><span>          4 ROCK     PAPER          0
#&gt; </span><span style='color: #555555;'>5</span><span>          5 SCISSORS ROCK           0
#&gt; </span><span style='color: #555555;'>6</span><span>          6 PAPER    SCISSORS       0</div><div class='input'>
<span class='co'># Note that ELO doesn't perform well</span>
<span class='no'>rps_ELO</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='ELO.html'>ELO</a></span>(<span class='no'>rps_df</span>)
<span class='no'>rps_ELO</span></div><div class='output co'>#&gt; 
#&gt; ELO Ratings For 3 Players Playing 120 Games
#&gt; 
#&gt;     Player Rating Games Win Draw Loss Lag
#&gt; 1 SCISSORS 2204.6    80  40    0   40   0
#&gt; 2     ROCK 2204.6    80  40    0   40   1
#&gt; 3    PAPER 2190.7    80  40    0   40   0
#&gt; </div><div class='input'><span class='no'>ELO_preds</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span>(
    <span class='no'>rps_ELO</span>,
    <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='no'>rps_df</span>)
)
<span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span>(
    <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='no'>rps_df</span>),
    <span class='no'>ELO_preds</span>
)</div><div class='output co'>#&gt;   time_index  throw_1  throw_2 outcome ELO_preds
#&gt; 1          1    PAPER     ROCK       1 0.4799619
#&gt; 2          2     ROCK SCISSORS       1 0.4999898
#&gt; 3          3 SCISSORS    PAPER       1 0.5200482
#&gt; 4          4     ROCK    PAPER       0 0.5200381
#&gt; 5          5 SCISSORS     ROCK       0 0.5000102
#&gt; 6          6    PAPER SCISSORS       0 0.4799518</div><div class='input'>    <span class='co'># Predictions are all ~0.5</span>

<span class='co'># Fit a mELO model that can handle these types of interactions.</span>
<span class='no'>rps_mELO</span> <span class='kw'>&lt;-</span> <span class='fu'>mELO</span>(<span class='no'>rps_df</span>, <span class='kw'>k</span><span class='kw'>=</span><span class='fl'>1</span>)
<span class='no'>rps_mELO</span></div><div class='output co'>#&gt; 
#&gt; mELO Ratings For 3 Players Playing 120 Games
#&gt; 
#&gt; k = 1.
#&gt; 
#&gt;     Player Rating Games Win Draw Loss Lag
#&gt; 1     ROCK 2202.8    80  40    0   40   1
#&gt; 2 SCISSORS 2201.1    80  40    0   40   0
#&gt; 3    PAPER 2196.1    80  40    0   40   0
#&gt; </div><div class='input'><span class='co'># Inspect advantage matrix</span>
<span class='fu'><a href='get_adv_mat.html'>get_adv_mat</a></span>(<span class='no'>rps_mELO</span>)</div><div class='output co'>#&gt;              PAPER      ROCK  SCISSORS
#&gt; PAPER        0.000  1162.784 -1139.092
#&gt; ROCK     -1162.784     0.000  1146.651
#&gt; SCISSORS  1139.092 -1146.651     0.000</div><div class='input'><span class='co'># Get predictions</span>
<span class='no'>mELO_preds</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span>(
    <span class='no'>rps_mELO</span>,
    <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='no'>rps_df</span>)
)
<span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span>(
    <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='no'>rps_df</span>),
    <span class='no'>mELO_preds</span>
)</div><div class='output co'>#&gt;   time_index  throw_1  throw_2 outcome  mELO_preds
#&gt; 1          1    PAPER     ROCK       1 0.998589025
#&gt; 2          2     ROCK SCISSORS       1 0.998595649
#&gt; 3          3 SCISSORS    PAPER       1 0.998797896
#&gt; 4          4     ROCK    PAPER       0 0.001410975
#&gt; 5          5 SCISSORS     ROCK       0 0.001404351
#&gt; 6          6    PAPER SCISSORS       0 0.001202104</div><div class='input'>    # Much better predictions!
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Lazaridis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


